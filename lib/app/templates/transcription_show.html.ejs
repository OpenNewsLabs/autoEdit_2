  <div class="container">
    <div class="row">
         <% if(window.ENV_CEP){%>
    <div class="hidden-xs col-sm-12 col-md-12 col-lg-12">
        <% } %>

        <% if(!window.ENV_CEP){%>
          <div class="hidden-xs col-sm-10 col-md-10 col-lg-10">
         <% } %>
        <!-- Breadcrumb  -->
        <ol class="breadcrumb">
          <li><a href="#transcriptions">Transcriptions</a></li>
          <li class="active"><%= title %></a></li>
        </ol>
        <!--  end Breadcrumb -->
      </div><!-- ./col -->
      <% if(!window.ENV_CEP){%>
      <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2 ">
      <!-- Export modal + button -->
      <!-- Button trigger modal -->
      <button type="button" class="btn btn-primary hidden-print" data-toggle="modal" data-target="#exportModal">
        Export <span class="glyphicon glyphicon-save"></span>
      </button>
      </div><!-- ./col -->
      <% } %>
</div><!-- ./row -->

<!-- Modal -->
<div class="modal fade hidden-print" id="exportModal" tabindex="-1" role="dialog" aria-labelledby="exportModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="exportModalLabel">Export Options</h4>
      </div>
      <div class="modal-body">
       <!-- Export options -->

        <h2><small>Video sequence </small></h2>
        <p>You can export an EDL (edit decision list) to open a video sequence of text selections in the video editing software. See the user manual for more on this
         <a id="edlUserManualInfo" <span  class="glyphicon glyphicon-question-sign" aria-hidden="true"></span></a>.
        <p>You can export your selections for a video sequence in chronological order.</p>
        <!-- Btn Edl - chronological order | -->

        <p><a id="exportEdlChronological" class="btn btn-primary btn-sm">
          <span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span>
          EDL
        </a>
        <hr>
        <h2><small>Captions </small></h2>

        <p>Export captions of the full transcription </p>

        <!-- Btn Captions - srt -->
        <p><a id="expoertCaptionsSrt" class="btn btn-primary btn-sm">
          <span class="glyphicon glyphicon-subtitles" aria-hidden="true"></span>
          Captions - srt
        </a></p>

        <hr>
        <h2><small>Plain text  </small></h2>

        <p>You can export the text of the full transcription as plain text without timecodes.</p>

        <!-- Btn Plain text transcription. -->
        <p><a id="exportPlainText" class="btn btn-primary btn-sm">
          <span class="glyphicon glyphicon-file" aria-hidden="true"></span>
          Plain text transcription
        </a></p>

        <p>You can also export timecoded plain text of the full transcription.</p>

        <!-- Btn  Timecoded plain text transcription. -->
        <p><a id="exportTimecodedTranscription" class="btn btn-primary btn-sm">
          <span class="glyphicon glyphicon-file" aria-hidden="true"></span>
          Timecoded plain text transcription
        </a></p>

        <p>As well as sparsely timecoded plain text</p>

        <!-- Btn  Timecoded plain text transcription. -->
        <p><a id="exportTimecodedSparse" class="btn btn-primary btn-sm">
          <span class="glyphicon glyphicon-file" aria-hidden="true"></span>
          Sparse timecoded plain text transcription
        </a></p>
        Condense every <input type="text" id="timecode-frequency-input" name="frequency" size="1" value="6"> lines

        <h2><small>Plain text - Selections </small> </h2>

       <p>You can receive your text selections as plain text in chronological order without timecodes.</p>

        <!-- Btn Plain Text Chronological -->
        <a id="exportPlainTextEDL" class="btn btn-primary btn-sm">
          <span class="glyphicon glyphicon-file" aria-hidden="true"></span>
          Plain Text EDL
        </a>

        <br> <br>
         <p> You can get your text selections as plain text in chronological order with timecodes.</p>

        <!-- Btn Timecoded Plain Text Chronological -->
        <p><a id="exportPlainTimecodedTextEDL" class="btn btn-primary btn-sm">
          <span class="glyphicon glyphicon-file" aria-hidden="true"></span>
          Timecoded Text EDL
        </a>

        <hr>

        <h2><small>Developerâ€™s options </small> </h2>
        <p>These are additional advanced export options for developers.</p>

        <h3><small>Json </small></h3>
        <p>JSON of full transcription </p>

        <!-- Btn Json of transcription  -->
        <p><a id="exportJsonTranscription" class="btn btn-primary btn-sm">
          <span class="glyphicon glyphicon-cloud-download" aria-hidden="true"></span>
          Json of transcription
        </a></p>

        <p>You can export a JSON of selections in chronological order as they appear in the video. This is equivalent to EDL option above.</p>


        <!-- Btn Json  EDL Selection order -->
        <a id="exportJsonEDL" class="btn btn-primary btn-sm">
          <span class="glyphicon glyphicon-cloud-download" aria-hidden="true"></span>
            Json  EDL of Selections
        </a></p>

        <p>You can export a JSON of the selections, equivalent to the EDL selection option above.</p>


        <% if (!window.userAgentSafari) { /* Safari and IE no support for the download attribute */ %>
        <h3><small>HTML5 Media</small></h3>

        <p>You can export HTML5 audio and video previews generated by the app. </p>

        <p>
          <!-- Btn HTML5 mp4 video -->
          <a id="exporthtml5Video" class="btn btn-primary btn-sm"
            <% if (processedVideo) { %>download href="<%= videoOgg %>"<% } else { %>disabled="disabled"<% } %>>
            <span class="glyphicon glyphicon-film" aria-hidden="true"></span>
            HTML5 mp4 video
          </a>

        <!-- Btn HTML5 ogg audio -->
          <a id="exportAudio" class="btn btn-primary btn-sm<%=processedAudio ? '' : ' btn-disabled' %>"
            <% if (processedAudio) { %>download href="<%= audioFile %>"<% } else { %>disabled="disabled"<% } %>>
            <span class=" glyphicon glyphicon-headphones" aria-hidden="true"></span>
            HTML5 ogg audio
          </a>
        </p>
        <% } %>

       <!-- End export option -->
      </div>
      <div class="modal-footer" >
        <button type="button" class="btn btn-default " data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<!-- Export end modal + button -->




    <!--TODO: Remove this div . check view backbone to see if in use tho -->
      <div id="clientSideEDLhelp" ></div>
    <!-- end of remove this div  -->

<div id="hilightModeNoticeContainer">
<div class="alert alert-info alert-dismissible hidden-print" role="alert" id="hilightModeNotice">
  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  <strong>You are in highlight mode.</strong>
  <p>Click on a word to play from the corresponding part in the video.</p>
  <p>Select words to include in your final output (EDL video sequence, plain text, etc.)</p>
</div>
</div>
  <div class="row">
    <!-- Video -->
    <div class="col-sm-3 col-md-3 col-lg-3 ">
<!-- hidden-xs  -->
<div class="hidden-print" id="media">
  <!--  Media -->
    <!--  if audio has been processed but video has not -->
    <!-- There could also be logic here to check if it's safari, and if it's safari move to audio only  -->
    <!-- also check media type if audio only then use audio  -->
    <% if(processedAudio && !processedVideo) { %>

     <div class="alert alert-success alert-dismissible" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
         Video is being processed
         <span id="processingExample" class="glyphicon glyphicon-refresh glyphicon-refresh-animate text-muted" aria-hidden="true"></span>
      </div>

      <!-- progress circle line if type of media is video -->
      <audio id="<%= 'videoId_'+ id %>"   width="10%" controls>
        <source src="<%= audioFile %>" type="audio/wav">
          Your browser does not support the audio element.
      </audio>
  <% }else if (processedVideo) { %>

<!-- ///////////////////////// -->
      <!-- if using safari on ios  -->
     <% if (window.userAgentSafari) { %>
     <!-- Repeating audio code -->
        <!-- progress circle line if type of media is video -->
      <audio id="<%= 'videoId_'+ id %>"   width="10%" controls>
        <source src="<%= audioFile %>" type="audio/wav">
          Your browser does not support the audio element.
      </audio>
      <!-- end repeating audio code -->

     <% }else{ %> <!-- else if using safari  -->

        <!-- if video has been processed -->
        <video id="<%= 'videoId_'+ id %>" poster="" width="100%" controls playsinline>
          <% if(videoOgg) { %>
          <!-- TODO: video type should be a var, videoOgg var should be changed to videoHTML5?or add new line with webm? -->
            <source src="<%= videoOgg %>" type="video/mp4">
              <% }else{ %>
            <source src="" type="video/ogg">
              <% }%>
              Your browser does not support the video tag.
          </video>

     <% }%> <!-- if using safari  -->
<!-- ///////////////////////// -->
  <% }else { %>
    <p>Media preview not ready </p>
  <% } %>




  <!-- rewind  -->
  <div class="btn-group" role="group" aria-label="...">
  <button type="button" id="rewindVideo"  data-toggle="tooltip" data-placement="bottom" title="rewind 5 seconds cmd + shift + j" class="btn btn-default btn-xs">  
    <span class="glyphicon glyphicon-fast-backward" aria-hidden="true"></span>
  
  <!-- decrease speed -->
  <button type="button"  id="slowVideo"  data-toggle="tooltip" data-placement="bottom" title="speed decrease command+j"   class="btn btn-default btn-xs"> 
    <span class="glyphicon glyphicon-backward" aria-hidden="true"></span>
  </button>

  <!-- play/pause  -->
  <button type="button" id="pausePlayVideo"   data-toggle="tooltip" data-placement="bottom" title="cmd + k"  class="btn btn-default btn-xs">
    <span class="glyphicon glyphicon-play" aria-hidden="true"></span>  /
    <span class="glyphicon glyphicon-pause" aria-hidden="true"></span>
  </button>

  <!-- increase speed  -->
  <button type="button" id="fastVideo"  data-toggle="tooltip" data-placement="bottom" title="speed increase command+l"  class="btn btn-default btn-xs">
    <span class="glyphicon glyphicon-forward" aria-hidden="true"></span>
  </button>
  
  <!-- Fast forward -->
  <button type="button"  id="fastForwardVideo" data-toggle="tooltip" data-placement="bottom" title="Fast forward 5 seconds command+shift+l"  class="btn btn-default btn-xs">  
    <span class="glyphicon glyphicon-fast-forward" aria-hidden="true"></span></button>
</div>
<hr>
<div class="row">
  <div class="col-md-6 col-sm-6 col-lg-6 col-xs-6 timecode-box-left">
<!-- <h4><small>Current Time</small></h4> -->
<input type="speed" class="form-control" id="playbackTimeCodes" placeholder="00:00:00:00" disabled>
</div>
<div class="col-md-6 col-sm-6 col-lg-6 col-xs-6 timecode-box-right">
<!-- <h4><small>Duration</small></h4> -->
<input type="speed" class="form-control" id="videoDuration" placeholder="00:00:00:00" disabled>
</div>
</div>

<h4><small>Playback Speed</small></h4>

<!--Speed input -->
<div class="form-group">
   <!--<label for="speedControll">Playback Speed</label>-->
    <input type="speed" class="form-control" id="speedInput" placeholder="0" disabled>
</div>
<!--end of Speed input -->
<div class="btn-group" role="group" aria-label="...">
  <button type="button" id="volumeDown"  class="btn btn-default btn-xs">
   <span class="glyphicon glyphicon-volume-down" aria-hidden="true"></span>
  </button>
  <button type="button"  id="volumeUp"  class="btn btn-default btn-xs">
    <span class="glyphicon glyphicon-volume-up" aria-hidden="true"></span>
  </button>
</div>

</div> <!-- media -->
<hr>


  <!-- Metadata info button -->
    <a class="btn btn-default btn-xs" role="button" data-toggle="collapse" href="#collapseMetadata" aria-expanded="false" aria-controls="collapseMetadata">
    <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> Info
    </a>
  <!-- End metadata info button  -->
  <!--Keyboard shortcuts -->
<!-- Small modal -->

<a class="btn btn-default btn-xs" role="button" data-toggle="modal" id="shortcuts" data-target="#keybaordShortcuts" aria-expanded="false" aria-controls="collapseExample">
  shortcuts
</a>

<% if(window.ENV_ELECTRON){ %>
<!-- only working in Electron enviroment for now, hidden in adobe and web app. -->
<a class="btn btn-default btn-xs" role="button" data-toggle="collapse" href="#collapseTweet" aria-expanded="false" aria-controls="collapseTweet">
  <span class="glyphicon glyphicon-twitter" aria-hidden="true"></span>   Tweet
  </a>

  <% }%>


<div class="collapse" id="collapseMetadata">
  <div class="well"  style="word-wrap:break-word;">
     <dl>
       <dt class="text-muted">Speech To Text System</dt>
       <dd><kbd><%= sttEngine %></kbd></dd>
       <dt class="text-muted">Language Model</dt>
       <dd><kbd><%= languageModel %></kbd></dd>
       <dt class="text-muted">File name</dt>
       <dd><kbd><%= metadata.fileName %></kbd></dd>
       <!-- <br> -->
       <dt class="text-muted">File Path Name</dt>
       <dd><kbd ><%= metadata.filePathName %></kbd></dd>
       <!-- <br> -->
       <dt class="text-muted">Date </dt>
       <dd><kbd><%= metadata.date %></kbd></dd>
       <!-- <br> -->
       <dt class="text-muted">Reel Name </dt>
       <dd><kbd><%= metadata.reelName %></kbd></dd>
       <!-- <br> -->
       <dt class="text-muted">Timecode</dt>
       <dd><kbd><%= metadata.timecode %></kbd></dd>
       <!-- <br> -->
       <dt class="text-muted">fps </dt>
       <dd><kbd><%= metadata.fps %></kbd></dd>
       <!-- <br> -->
       <dt class="text-muted">Duration</dt>
       <dd><kbd><%= fromSeconds(metadata.duration) %></kbd> <span  class="text-muted"></span></dd>
       <!-- <br> -->
       <dt class="text-muted">Description </dt>
       <dd  class="text-muted description"><%= description %></dd>
     </dl>
 </div> <!--end metadada info well-->
 </div>
 <!--end metadada info -->
 


<div class="modal fade bs-example-modal-sm" id="keybaordShortcuts" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
  <div class="modal-dialog " role="document">
    <div class="modal-content">
    <div class="modal-header">
       <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    <h4>Keyboard Shortcuts</h4>
  </div>
     <div class="modal-body">

         <div class="table-responsive">
       <table class="table table-striped  table-hover">
        <tbody>
          <tr>
            <th scope="row">Pause/Play</th>
              <td> <kbd>cmd</kbd>+<kbd>k</kbd></td>
              <td>Play pause video</td>
            </tr>
            <tr>
              <th scope="row"></th>
                <td> <kbd>command</kbd>+<kbd>shift</kbd>+<kbd>k</kbd> </td>
                <td></td>
              </tr>
              <tr>
                <th scope="row">Faster</th>
                <td> <kbd>command</kbd>+<kbd>l</kbd> </td>
                <td>Increase video playback rate</td>
              </tr>
              <tr>
                <th scope="row">Slower</th>
                <td> <kbd>command</kbd>+<kbd>j</kbd> </td>
                <td>Decrease video playback rate</td>
              </tr>
              <tr>
                <th scope="row">Fast forward</th>
                <td>  <kbd>command</kbd>+<kbd>shift</kbd>+<kbd>l</kbd> </td>
                <td>Fast forward <code>5</code> seconds</td>
              </tr>
              <tr>
                <th scope="row"></th>
                <td><kbd>command</kbd>+<kbd>shift</kbd>+<kbd>&rarr;</kbd></td>
                <td></td>
              </tr>
              <tr>
                <th scope="row">Rewind</th>
                <td><kbd>command</kbd>+<kbd>shift</kbd>+<kbd>j</kbd></td>
                <td>Rewind <code>5</code>  seconds</td>
              </tr>
              <tr>
                <th scope="row"></th>
                <td> <kbd>command</kbd>+<kbd>shift</kbd>+<kbd>&larr;</kbd></td>
                <td></td>
              </tr>
              <tr>
                <th scope="row">Increase volume</th>
                <td> <kbd>command</kbd>+<kbd>shift</kbd>+<kbd>&uarr;</kbd> </td>
                <td>Raises the audio volume</td>
              </tr>
              <tr>
                <th scope="row">Decrease volume</th>
                <td><kbd>command</kbd>+<kbd>shift</kbd>+<kbd>&darr;</kbd> </td>
                <td>Lowers the audio volume</td>
              </tr>
              <tr>
                <th scope="row">Show keyboard shortcuts</th>
                <td> <kbd>shift</kbd>+<kbd>/</kbd> </td>
                <td>Shows this cheat sheet witht keyboard shortcuts</td>
              </tr>
              <tr>
                <th scope="row">Show inspector console</th>
                <td> <kbd>Alt</kbd>+<kbd>cmd</kbd>+<kbd>j</kbd> </td>
                <td>Shows nwsj V8 inspector console, for developers, debugging</td>
              </tr>
        </tbody>
      </table>
    </div>

    </div>
     <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>

</div>
</div>
</div>
<!-- end Keyboard shortcuts -->


<!-- Tweet -->
<div class="collapse" id="collapseTweet">
  <div class="well"  style="word-wrap:break-word;">  
    <label for="mediaTypeForTweet">Media Type</label>
    <select class="form-control" id="mediaTypeForTweet">
      <option value="audio">Audio</option>
      <option value="video">Video</option>
    </select>
    <div class="form-check">
      <label class="form-check-label">
        <input class="form-check-input"   id="captionsCheckBoxForTweet" type="checkbox" checked="">
        Captions 
      </label><br>
      <small id="captionsHelp" class="form-text text-muted">Burn in caption onto your tweet media</small>
    </div>
    <!-- set in  -->
  
    <!-- display in -->
    <!-- use range input field -->
    <label for="setInForTweet">In Point</label>
   
    <div class="input-group">
      <input type="text" class="form-control" id="inPointTwitterInput" placeholder="00:00:00:00" value="0" disabled>
      <span class="input-group-btn">
        <a class="btn btn-default" id="inPointTwitterBtn" type="button">Set In</a>
      </span>
    </div><!-- /input-group -->

    <!-- <input id="inputTweetInPointRange" type="range" min="-10" max="10" step="any"> -->

    <!-- set out -->
    <label for="setInForTweet">Out Point</label>
    <div class="input-group">
        <input type="text" class="form-control" id="outPointTwitterInput" placeholder="00:00:00:00"  value="0" disabled>
        <span class="input-group-btn">
          <a class="btn btn-default" id="outPointTwitterBtn"  type="button">Set Out</a>
        </span>
      </div><!-- /input-group -->

    <div class="form-group" id="twitterDurationContainer">
      <label for="setInForTweet">Duration</label>
      <input type="text" class="form-control" id="twitterDuration" placeholder="00:00:00:00"  value="0" disabled>
    </div>
      <!-- <input type="range" id="inputTweetOutPointRange" min="-10" max="10" step="any"> -->

      <!-- TODO: range -->
    <!-- Text status - default to transcription text, but editable -->
    <label for="forTweetText">Tweet text</label>
    <!-- input text area  -->
    <textarea class="form-control" id="twitterTextStatusArea" rows="3"></textarea>
      <br>
      <div id="twitterCharCountContainer"  class="form-group">
       <label for="setInForTweet">Characters count</label>
        <input type="text" class="form-control" id="twitterCharCountInputDisplay" placeholder="0/280"  value="0/280" disabled>
    </div>
    <div id="tweetResponseLink">
    </div>
      <br>
    <a class="btn btn-default" id="getTweetTextBtn" type="button">Get Text</a>

      <!-- TODO: add char count eg 0/280-->
      
    <hr>

    <!-- settings, eg max duration - default 2 min as some org can change to 6 min <-- move to settings? -->

    <!-- settings eg max char eg default, 140 but can be 280 max -->

    <!-- alert - duration too long, over 2 min -->
    <!-- alert  - char count too long-->
    
    <!-- preview play  -->

    <!-- <a type="button" id="previewTweetBtn" class="btn btn-primary">Preview</a> -->

    <!--  if alert pass, then enable tween button -->
    <!-- callback to re-enable tweet when done tweeting -->
    <!-- disaply URL of the tweet? -->
    <!-- Tweet -->
    <a type="button" id="sendTweetBtn" class="btn btn-success" disabled>Tweet</a>
 </div>
 </div>
 <!--end tweet -->


</div><!-- ./col -->

    <!-- Transcription -->
    <div class="col-xs-12 col-sm-9 col-lg-9 col-xl-9">
      <div class="panel panel-default">
        <div class="panel-heading hidden-print">
          <div class="row">
          <div class="col-xs-12 col-sm-7 col-lg-7 col-xl-7">
            <div class="btn-group" role="group" aria-label="...">
              <button type="button"  id="highlightWords" class="btn btn-primary active" >Highlight</button>
        <!--       <button type="button" class="btn btn-default">Read</button> -->
              <button type="button"  id="editWords" class="btn btn-default" >Edit </button>

            </div>



<a type="button" id="clearHighlights" class="btn btn-default" >
<!-- hilighter icon -->
<!-- end hilighter icon -->
 Clear highlights
 </a>



 <% if(window.ENV_CEP){%>
  <a id="btnExportToAdobeSequenceInCep" class="btn btn-primary btn-sm">
    add to sequence
  </a>
  <!-- <a id="btnExportCaptionToProjectPanel" class="btn btn-primary btn-sm">
      get captions
    </a> -->
 <% } %>


          </div>
          <!-- search box -->
          <div class="col-xs-12 col-sm-5 col-lg-5 col-xl-5">
            <div class="input-group">
             <span class="input-group-addon">
               <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
             </span>
             <input type="text" class="form-control" id="searchCurrentTranscription" placeholder="Find in transcript">
            </div>
          </div>
          <!-- end search box -->
          </div>
        </div>
        <div class="panel-body transcription">
          <!-- Paragaph module -->
          <% _.each(text, function(paragraph) { %>
          <dl class="dl-horizontal">
            <dt class="speaker" contenteditable="true"><%= paragraph.speaker %>
               </dt> <dt>
              <!-- fir is the first  -->
            </dt>
              <% _.each(paragraph.paragraph, function(lines) { %>
              <% _.each(lines, function(line) { %>
            <dd >
              <!--  <p class="lines" contenteditable="false"> -->
                <% _.each(line, function(word) { %>
                  <span contenteditable="false"
                        class="words text-muted mousetrap" data-transcription-id="<%= id %>"
                        data-paragaph-id="<%= paragraph.id %>"
                        data-word-id="<%= word.id %>"
                        data-line-id="<%= line.id %>"
                        data-reel-name="<%= metadata.reelName %>"
                        data-clip-name="<%= metadata.fileName %>"
                        data-video-id="<%= 'videoId_'+ id %>"
                        data-fps="<%= metadata.fps %>"
                        data-speaker="<%= paragraph.speaker %>"
                        data-src="<%= videoOgg %>"
                        data-audio-file="<%= audioFile %>"
                        data-start-time="<%= word.startTime %>"
                        data-text="<%= word.text %>" data-end-time="<%= word.endTime %>"><%= word.text %> </span>
                  <% }) %>
           <!--    </p> -->
           </dd>
             <% }) %>
            <% }) %>
          </dl>
          <% }) %>
          <!-- ./paragraph module -->
      </div>
    </div>
    </div><!-- ./col transcription-->
  </div><!-- ./row   -->
  </div><!-- ./container -->
